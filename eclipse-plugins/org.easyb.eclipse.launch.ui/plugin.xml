<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <!--Launch Config -->
   <extension point="org.eclipse.debug.core.launchConfigurationTypes">
	    <launchConfigurationType
	        name="Easyb Story"
	        delegate="org.easyb.launch.launcher.BehaviourLaunchConfigurationDelegate"
	        modes="run, debug"               
	        id="org.easyb.launch.launcher.BehaviourLaunchConfigurationDelegate">        
	    </launchConfigurationType>
	</extension>
   
	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
	    <launchConfigurationTypeImage
	        icon="resources/images/icons/easyb.png"
	        configTypeID="org.easyb.launch.launcher.BehaviourLaunchConfigurationDelegate"
	        id="org.easyb.launch.easyblaunch.img">
	    </launchConfigurationTypeImage>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
	    <launchConfigurationTabGroup
	        type="org.easyb.launch.launcher.BehaviourLaunchConfigurationDelegate"
	        class="org.easyb.launch.launcher.BehaviourLaunchConfigurationTabGroup"
	        id="org.easyb.launch.launcher.BehaviourLaunchConfigurationTabGroup">
	    </launchConfigurationTabGroup>
	</extension>
	
	<!--Launch short cut-->
	<extension point="org.eclipse.debug.ui.launchShortcuts">
	   <Shortcut
	      id="org.easyb.launch.launcher.BehaviourLaunchShortcut"
	      class="org.easyb.launch.launcher.BehaviourLaunchShortcut"
	 		label="easyb story"
	 		icon="resources/images/icons/easyb.png"
	 		modes="run, debug">
 
            <contextualLaunch>
           		<enablement>
	           		<with variable="selection">
		               <count value="1"/>
		               <iterate>
		                 <or>
		                   <!--test property="org.eclipse.debug.ui.matchesPattern" value="*.story"/-->
			        	  <test property="org.eclipse.debug.ui.matchesContentType" value="org.easyb.eclipse.contenttype.groovystory"/>
			        	  <test property="org.eclipse.debug.ui.matchesContentType" value="org.easyb.eclipse.contenttype.story"/>
		                 </or>
		               </iterate>
		             </with>
           			
           		</enablement>
           		<contextLabel label="Run easyb story" mode="run"/>
           		<contextLabel label="Debug easyb story" mode="debug"/>
           		
        	</contextualLaunch>
            <configurationType id="org.easyb.launch.launcher.BehaviourLaunchConfigurationDelegate"/>
	
	   </Shortcut>
	 </extension>
	 
	<!--<extension point="org.eclipse.ui.editors"> 
		<editor
	      class="org.eclipse.ui.editors.text.TextEditor"
	      default="false"
	      extensions="story"
	      icon="resources/images/icons/easyb.png"
	      id="org.easy.eclipse.ui.dummyEditor"
	      name="easyb story editor">
		</editor> 
	</extension>-->
	
   <extension
         point="org.eclipse.core.contenttype.contentTypes">
      <content-type
            file-extensions="story,specification"
            id="org.easyb.eclipse.contenttype.story"
            name="easyb story"
            priority="normal">
      </content-type>
      <content-type
            file-extensions="groovy"
            id="org.easyb.eclipse.contenttype.groovystory"
            name="easyb groovy story"
            priority="low">
      </content-type>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command 
            categoryId="org.eclipse.debug.ui.category.run"
            id="org.easyb.launch.launcher.BehaviourLaunchShortcut.run"
            name="run easby story">
      </command>
   </extension>	
   
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.easyb.launch.launcher.BehaviourLaunchShortcut.run"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+X S">
      </key>
   </extension>	

</plugin>
