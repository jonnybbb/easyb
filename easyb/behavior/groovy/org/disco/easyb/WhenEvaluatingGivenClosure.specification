import org.disco.easyb.StoryBinding
import static org.junit.Assert.assertEquals

it "should notify listener of exceptions", {
    def listener = new FakeListener()

    new GroovyShell(StoryBinding.getBinding(listener)).evaluate('''
            given "an exception is thrown", {
                throw new RuntimeException('test')
            }
        ''');

    assertEquals 'test', listener.result.cause.message
}
